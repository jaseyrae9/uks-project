{% extends 'base.html' %}

{% block content %}

<h3 style="margin-bottom: 20px">Search results</h3>

<hr>

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="code-tab" data-toggle="tab" href="#code" role="tab" aria-controls="code"
            aria-selected="true"><i style="margin-right:6px" class="fas fa-folder-open"></i>Projects</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="issue-tab" data-toggle="tab" href="#issue" role="tab" aria-controls="issue"
            aria-selected="false"><i style="margin-right:6px" class="fas fa-exclamation-circle"></i>Issues</a>
    </li>
</ul>

<div class="tab-content" id="myTabContent">
    <!-- code changes tab -->
    <div class="tab-pane fade show active" id="code" role="tabpanel" aria-labelledby="code-tab">
        <div>
            <div style="margin-top: 20px">
                {% if observed_projects %}

                <div class="row backg" style="margin-top: 50px;">
                    <!-- list of all projects -->
                    {% for project in observed_projects %}
                    <div class="col-lg-6" style="margin-bottom: 10px;">
                        <div class="card text-center">
                            <div class="card-header">
                                <h5><a href="{% url 'one_project' project.id %}">{{project.name}}</a></h5>
                                <h6>{{project.git_repo}}</h6>
                            </div>
                            <div class="card-body">
                                <p class="card-text">{{project.description}}</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                {% else %}

                <p>There are no projects available.</p>

                {% endif %}

            </div>
        </div>
    </div>
    <!-- issues tab -->
    <div class="tab-pane fade" id="issue" role="tabpanel" aria-labelledby="issue-tab">
        <div style="margin-top: 20px">
            <div style="margin-top: 20px">
                {% if issues_list %}
                    <!-- list of issues -->
                    {% for issue in issues_list %}
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    {% if issue.state == 'OP'%}
                                        <i style="margin-right: 10px; margin-top: 8px; color: green" class="fas fa-exclamation-circle"></i>
                                    {% else %}
                                        <i style="margin-right: 10px; margin-top: 8px; color: red" class="fas fa-exclamation-circle"></i>
                                    {% endif %}
                                    <h5 class="card-title"><a href="{% url 'one_issue' issue.project.id issue.id %}">{{issue.title}}</a></h5>
                                </div>
                                <div class="row">
                                    <i style="margin-right: 10px; margin-top: 8px; color: white" class="fas fa-ellipsis-h"></i>
                                    <p class="card-text">{{issue.description}}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>There are no issues for this project.</p>
                {% endif %}
            </div>
        </div>
    </div>
   
    <!-- add new tabs ? -->
</div>
</ul>

{% endblock %}